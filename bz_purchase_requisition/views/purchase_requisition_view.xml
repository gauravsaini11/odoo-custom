<?xml version="1.0"?>
<odoo>
    <data>
        <menuitem
            id="purchase_requisition.menu_purchase_requisition_pro_mgt"
            sequence="10"
            parent="purchase.menu_procurement_management"
            action="purchase_requisition.action_purchase_requisition"
            name="Purchase Requisition"
        />
    </data>

    <record model="ir.actions.act_window" id="purchase_requisition.action_purchase_requisition">
        <field name="name">Purchase Requisition</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.requisition</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{}</field>
        <field name="search_view_id" ref="purchase_requisition.view_purchase_requisition_filter"/>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Start a new purchase agreement
          </p><p>
            Example of purchase agreements include call for tenders and blanket orders.
          </p><p>
            In a call for tenders, you can record the products you need to buy
            and generate the creation of RfQs to vendors. Once the tenders have
            been registered, you can review and compare them and you can
            validate some and cancel others.
          </p><p>
            For a blanket order, you can record an agreement for a specifc period
            (e.g. a year) and you order products within this agreement, benefiting
            from the negotiated prices.
          </p>
        </field>
    </record>

    <record model="ir.ui.view" id="view_purchase_requisition_form_inherit">
        <field name="name">purchase.requisition.form</field>
        <field name="model">purchase.requisition</field>
        <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='type_id']" position="attributes">
                <attribute name="string">Requisition Type</attribute>
            </xpath>
            <xpath expr="//field[@name='date_end']" position="attributes">
                <attribute name="string">Requisition Deadline</attribute>
            </xpath>
            <field name="vendor_id" position="after">
                <field name="department" />
            </field>
            <xpath expr="//notebook/page[@name='products']/field[@name='line_ids']/tree/field[@name='product_qty']" position="before">
                <field name="cost_center"/>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_purchase_requisition_tree_inherit">
        <field name="name">purchase.requisition.tree</field>
        <field name="model">purchase.requisition</field>
        <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_end']" position="attributes">
                <attribute name="string">Requisition Deadline</attribute>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_purchase_requisition_type_tree_inherit">
        <field name="name">purchase.requisition.type.tree</field>
        <field name="model">purchase.requisition.type</field>
        <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_type_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="string">Requisition Type</attribute>
            </xpath>
            <xpath expr="//field[@name='exclusive']" position="attributes">
                <attribute name="string">Requisition Selection Type</attribute>
            </xpath>
        </field>
    </record>

    <menuitem
        id="purchase_requisition.menu_purchase_requisition_type"
        sequence="2"
        parent="purchase.menu_purchase_config"
        action="purchase_requisition.tender_type_action"
        name="Purchase Requisition Types"
    />

    <record id="purchase_requisition.tender_type_action" model="ir.actions.act_window">
        <field name="name">Purchase Requisition Types</field>
        <field name="res_model">purchase.requisition.type</field>
        <field name="context">{}</field>
        <field name="view_mode">tree,kanban,form</field>
    </record>

    <record model="ir.ui.view" id="view_purchase_requisition_type_form_inherit">
        <field name="name">purchase.requisition.type.form</field>
        <field name="model">purchase.requisition.type</field>
        <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_type_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group/group[1]" position="attributes">
                <attribute name="string">Requisition Type</attribute>
            </xpath>
            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="string">Requisition Type</attribute>
            </xpath>
            <xpath expr="//field[@name='exclusive']" position="attributes">
                <attribute name="string">Requisition Selection Type</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_purchase_requisition_filter_inherit" model="ir.ui.view">
            <field name="name">purchase.requisition.list.select</field>
            <field name="model">purchase.requisition</field>
            <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_agreements']" position="attributes">
                    <attribute name="string">My Requisition</attribute>
                </xpath>
            </field>
    </record>
</odoo>